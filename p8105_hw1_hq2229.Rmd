---
title: "p8105_hw1_hq2229"
author: "Hantang Qin"
output: github_document
date: "2025-09-17"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Part1.
```{r}
library(moderndive)
library(tidyverse)

data("early_january_weather")
n_rows <- nrow(early_january_weather)
n_cols <- ncol(early_january_weather)
mean_temp <- mean(early_january_weather$temp, na.rm = TRUE)

```

This dataset has `r nrow(early_january_weather)` rows and `r ncol(early_january_weather)` columns,  
so it’s pretty big but still easy to explore. The average temperature works out to  
about `r round(mean(early_january_weather$temp, na.rm = TRUE), 1)` °F, which gives me a quick sense  
of how chilly it was in early January. The most important columns are `time_hour`  
(the actual time stamps), `temp` for temperature, and `humid` for humidity — these are what  
I’ll focus on to see how weather changes over time.


```{r}
ggplot(early_january_weather, aes(x = time_hour, y = temp, color = humid)) +
  geom_point() +
  labs(title = "Temperature vs Time in Early January",
       x = "Time", y = "Temperature (°F)", color = "Humidity")
ggsave("scatter_temp_time.png")

```
**Interpretation.** The temperature data shows a clear daily (diurnal) cycle—cooler at night and warmer during the day. Higher humidity (lighter points) tends to align with the cooler nighttime and early-morning periods, while humidity stays relatively steady when temperatures peak around January 14–15.


Part2
```{r}
library(tidyverse)

set.seed(123)  

random_sample <- rnorm(10)                     
logical_vec   <- random_sample > 0           
char_vec      <- letters[1:10]                 
factor_vec    <- factor(rep(c("low","med","high"), length.out = 10))  

mixed_type_df <- tibble(
  random_sample = random_sample,
  logical_vec   = logical_vec,
  char_vec      = char_vec,
  factor_vec    = factor_vec
)

mixed_type_df


```

```{r}
vars <- c("random_sample", "logical_vec", "char_vec", "factor_vec")

mean_results <- tibble(
  variable = vars,
  attempt  = map(vars, ~ tryCatch(
    mean(pull(mixed_type_df, .x)), 
    error = function(e) paste("ERROR:", e$message)
  ))
)

mean_results

```

```{r}
logical_as_num <- as.numeric(mixed_type_df$logical_vec)  
char_as_num    <- as.numeric(mixed_type_df$char_vec)    
factor_as_num  <- as.numeric(mixed_type_df$factor_vec)  

mean_logical_num <- mean(logical_as_num)
mean_char_num    <- mean(char_as_num, na.rm = TRUE)  
mean_factor_num  <- mean(factor_as_num)
```


The mean works for random_sample because it’s numeric, and for logical_vec because TRUE/FALSE are treated as 1/0.
It fails for char_vec and factor_vec since those aren’t numeric by default. After using as.numeric(), logicals become 0/1, characters become NA (with a warning), and factors convert to their underlying level codes (low=1, med=2, high=3). This explains the “what works and why” behavior for the mean.
